<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Ask question</title>
    <style>
        body {
            font-family: system-ui, Arial, sans-serif;
            margin: 32px;
            background: #fff;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        header {
            margin-bottom: 32px;
        }
        h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 25px;
        }
        .form-label {
            font-weight: 600;
            display: block;
            margin-bottom: 8px;
        }
        .form-control, textarea {
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        .tags-input {
            margin-top: 10px;
        }
        .btn-primary, .btn-secondary {
            padding: 10px 24px;
            border: none;
            border-radius: 5px;
            margin-right: 8px;
            font-size: 1rem;
            cursor: pointer;
        }
        .btn-primary {
            background: #0077cc;
            color: #fff;
        }
        .btn-secondary {
            background: #eee;
            color: #333;
        }
        .section {
            margin-top: 28px;
            background: #fafbfc;
            border: 1px solid #e3e6e8;
            padding: 18px;
            border-radius: 8px;
        }
        .radio-group label {
            margin-right: 20px;
            display: inline-block;
        }
        .required {
            color: #c00;
        }
        .step-list {
            margin-top: 12px;
            font-size: 1rem;
            color: #555;
        }
        .step-list li {
            margin-bottom: 8px;
        }
        .help-links {
            margin-top: 12px;
            font-size: 0.95rem;
        }
        .help-links a {
            color: #0077cc;
            text-decoration: underline;
        }
    </style>
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />

    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
</head>
<body>
<div class="container">
    <header>
        <h2>Ask question</h2>
    </header>
    <form th:action="@{/questions/new}" method="post" autocomplete="off">
        <div class="form-group">
            <label for="title" class="form-label">Title <span class="required">*</span></label>
            <input type="text" id="title" name="title" class="form-control" minlength="15" required
                   placeholder="Be specific and imagine you’re asking another person. Min 15 characters.">
        </div>
        <div class="form-group">

            <div id="editor"></div>
            <input type="hidden" name="body" id="hiddenBody">
        </div>
        <script>
            const editor = new toastui.Editor({
              el: document.querySelector('#editor'),
              height: '400px',
              initialEditType: 'markdown', // or 'wysiwyg'
              previewStyle: 'vertical',
              placeholder: 'Write your question with markdown here...',
              toolbarItems: [
                ['heading', 'bold', 'italic', 'strike'],
                ['hr'],
                ['quote', 'ul', 'ol', 'task'],
                ['table', 'image', 'link'],
                ['code', 'codeblock']
              ]
            });
            document.querySelector('form').addEventListener('submit', function(e){
              document.getElementById('hiddenBody').value = editor.getMarkdown();
            });
        </script>
        <div class="form-group">
            <label class="form-label">Tags <span class="required">*</span></label>
            <input type="text" name="tags" class="form-control tags-input" placeholder="Add up to 5 tags (e.g. java spring thymeleaf)">
        </div>
        <div class="form-group">
            <label class="form-label">Select where your question should be posted:</label>
            <div class="radio-group">
                <input type="radio" id="private" name="post_option" th:value="private" checked>
                <label for="private">Get private feedback in Staging Ground</label>
                <input type="radio" id="public" name="post_option" th:value="public">
                <label for="public">Post question on Stack Overflow now</label>
            </div>
        </div>
        <div style="margin-top:22px;">
            <button type="submit" class="btn-primary">Review your question</button>
            <button type="reset" class="btn-secondary">Discard draft</button>
        </div>
    </form>
    <div class="section">
        <strong>Step 1: Draft your question</strong>
        <ol class="step-list">
            <li>Summarize the problem</li>
            <li>Describe what you’ve tried</li>
            <li>Show some code</li>
        </ol>
        <div class="help-links">
            Helpful links:<br>
            <a href="#">How to ask a good question?</a> |
            <a href="#">Help Center</a>
        </div>
    </div>
</div>
<script>
    function insertMarkdown(text) {
        var textarea = document.getElementById('body');
        var start = textarea.selectionStart;
        var end = textarea.selectionEnd;
        var content = textarea.value;
        textarea.value = content.substring(0, start) + text + content.substring(end);
        textarea.focus();
        textarea.selectionEnd = start + text.length;
    }
</script>
</body>
</html>
